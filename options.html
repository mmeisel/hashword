<!DOCTYPE html>
<html lang="en" ng-app="options" ng-csp>
<head>
  <title>Hashword Options</title>
  <link rel="stylesheet" type="text/css" href="lib/angular-csp.css"/>
  <link rel="stylesheet" type="text/css" href="lib/bootstrap.min.css"/>
  <link rel="stylesheet" type="text/css" href="hashword.css"/>
  <script type="text/javascript" src="lib/angular.min.js"></script>
  <script type="text/javascript" src="lib/sha3.js"></script>
  <script type="text/javascript" src="lib/tld.js"></script>
  <script type="text/javascript" src="hashword.js"></script>
  <script type="text/javascript" src="sitesettings.js"></script>
  <script type="text/javascript" src="options.js"></script>
</head>
<body>
  <div class="container" ng-controller="OptionsCtrl">
    <h3><img src="images/icon38.png"/> Hashword Options</h3>
    <div class="row ng-cloak">
      <div class="col-md-5 col-md-push-7">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h4 class="panel-title" ng-hide="editing">Site Settings</h4>
            <h4 class="panel-title" ng-show="editing">Settings for {{ editing.domain }}</h4>
          </div>
          <div class="panel-body" ng-hide="editing">
            <em class="text-muted">Click on a site to view or edit its settings.</em>
          </div>
          <form class="panel-body form-horizontal" ng-show="editing" ng-submit="saveEditing()">
            <div hw-settings-editor="editing.settings" notes></div>
            <div class="form-group">
              <div class="col-xs-5 text-left">
                <button type="button" class="btn btn-danger" ng-click="deleteEditing()">
                  <span class="glyphicon glyphicon-trash"></span>
                </button>
              </div>
              <div class="col-xs-7 text-right">
                <button type="button" class="btn btn-default" ng-click="cancelEditing()">Cancel</button>
                <button type="submit" class="btn btn-success">Save</button>
              </div>
            </div>
          </form>
        </div>
      </div>
      <div class="col-md-7 col-md-pull-5">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h4 class="panel-title">Sites</h4>
          </div>
          <table class="table table-hover">
            <thead>
              <tr>
                <th>Domain</th>
                <th>First Added</th>
                <th>Last Used</th>
                <th style="width: 40px"></th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="(domain, settings) in allSettings"
                  ng-class="{ 'success': editing.domain == domain }"
                  ng-click="edit(domain)">
                <td>{{ domain }}<br/><small class="text-muted">{{ settings.notes }}</small></td>
                <td>{{ (settings.createDate | date) || '2013' }}</td>
                <td>{{ (settings.accessDate | date) || '2013' }}</td>
                <td>
                  <span class="glyphicon glyphicon-pencil hover-only"></span>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
